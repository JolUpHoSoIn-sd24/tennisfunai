

<div align=center>
	<h3>ğŸ“š Tech Stack ğŸ“š</h3>
	<p>âœ¨ Platforms & Languages âœ¨</p>
</div>
<div align="center">
    <br/>
    <img src="https://img.shields.io/badge/Python-3776AB?style=for-the-badge&logo=Python&logoColor=white">
    <img src="https://img.shields.io/badge/Anaconda-44A833?style=for-the-badge&logo=Anaconda&logoColor=white">
	
<br/>    
    <img src="https://img.shields.io/badge/Pytorch-EE4C2C?style=for-the-badge&logo=Pytorch&logoColor=white" />
    <img src="https://img.shields.io/badge/TensorFlow-FF6F00?style=for-the-badge&logo=TensorFlow&logoColor=white" />
    <img src="https://img.shields.io/badge/OpenCV-5C3EE8?style=for-the-badge&logo=OpenCV&logoColor=white" />
<br/>
	<img src="https://img.shields.io/badge/MongoDB-47A248?style=for-the-badge&logo=MongoDB&logoColor=white" />
 	<img src="https://img.shields.io/badge/Qdrant-DD244D?style=for-the-badge&logoColor=white" />
<br/>
 	<img src="https://img.shields.io/badge/Docker-2496ED?style=for-the-badge&logo=Docker&logoColor=white" />
 	<img src="https://img.shields.io/badge/Google%20Cloud Platform-4285F4?style=for-the-badge&logo=Google%20Cloud&logoColor=white" />

</div>
<br>
<div align=center>
	<p>ğŸ›  Tools ğŸ› </p>
</div>
<div align=center>
	<img src="https://img.shields.io/badge/GitHub-181717?style=for-the-badge&logo=GitHub&logoColor=white" />
<br/>
	<img src="https://img.shields.io/badge/Visual%20Studio%20Code-007ACC?style=for-the-badge&logo=VisualStudioCode&logoColor=white" />
 <br/>
 	<img src="https://img.shields.io/badge/notion-000000?style=for-the-badge&logo=notion&logoColor=white" />
  	<img src="https://img.shields.io/badge/slack-4A154B?style=for-the-badge&logo=slack&logoColor=white" />



</div>
<br>

## í”„ë¡œì íŠ¸ ê°œìš”
í…Œë‹ˆìŠ¤ íŒŒíŠ¸ë„ˆ & ì½”íŠ¸ ë§¤ì¹­ ë° ë¬´ì¸ì‹¬íŒ ì„œë¹„ìŠ¤
<br/>
AI ê¸°ë°˜ ê°œì¸ ë§ì¶¤í˜• í…Œë‹ˆìŠ¤ í”Œë ˆì´ì–´ ë° í…Œë‹ˆìŠ¤ ì½”íŠ¸ ë§¤ì¹­ ê¸°ëŠ¥, ë¹„ì „ AI ê¸°ë°˜ ë¼ì¸ì½œë§ ë° ì˜¤í†  ìŠ¤ì½”ì–´ë§ ê¸°ëŠ¥ì„ ì œê³µí•˜ëŠ” ì˜¬ì¸ì› í…Œë‹ˆìŠ¤ ë§¤ì¹­ í”Œë«í¼ ì…ë‹ˆë‹¤.
<br/>
<br/>
<div align="center">
	<img src="https://github.com/JolUpHoSoIn-sd24/.github/assets/62142245/91447a54-5d6e-403f-af39-710571fa68d6" width="1000">
</div>
<br/>


## í”„ë¡œì íŠ¸ ë ˆí¬ì§€í† ë¦¬
<br/>
AI, í”„ë¡ íŠ¸ì—”ë“œ, ë°±ì—”ë“œ ë ˆí¬ì§€í† ë¦¬ë¥¼ ì•„ë˜ ë§í¬ì—ì„œ í™•ì¸í•˜ì‹¤ ìˆ˜ ìˆìŠµë‹ˆë‹¤.
<br/>

- main: https://github.com/JolUpHoSoIn-sd24
- AI: https://github.com/JolUpHoSoIn-sd24/tennisfunai
- frontend: https://github.com/JolUpHoSoIn-sd24/tennisfunapp
- backend: https://github.com/JolUpHoSoIn-sd24/tennisfunserver

<br/>

### AI íŒ€ ì†Œê°œ

|ì´ë¦„|ì—­í• | email              |github|
|---|---|--------------------|---|
|ì†¡ì •ìš°|AI ê°œë°œ| jws5346@ajou.ac.kr  |https://github.com/KyleJSong|


<br/>


## Installation && Dependency

- í•´ë‹¹ repositoryë¥¼ cloneí•©ë‹ˆë‹¤.
	```
	git clone https://github.com/JolUpHoSoIn-sd24/tennisfunai.git && cd tennis_ai
	```

- ê¸°í˜¸ì— ë§ê²Œ pyplë¡œ requirements.txtë¥¼ ì„¤ì¹˜í•˜ê±°ë‚˜ conda ê°€ìƒí™˜ê²½ì„ ìƒì„±í•©ë‹ˆë‹¤.

	- without conda
		```
		pip install -r requirements.txt
		```

	- with conda
		```
		conda env create -f environment.yaml && conda activate tp
		```

	- with Docker(ToDo)
		```
		```

## ë§¤ì¹­ ì¶”ì²œ AI

### ê°œìš”

![matching_ai_example](./images/matching_ai_example.png)

### ì‹¤í–‰

./tennis-matching/scripts íŒŒì¼ì— ì‹¤í–‰ ìŠ¤í¬ë¦½íŠ¸ê°€ ìˆìŠµë‹ˆë‹¤.

* ê¸°ì¡´ collection reset
	```
	bash ./scripts/reset.sh
	```

* ê¸°ì¡´ collection reset í›„ MongoDB ë‚´ ë°ì´í„°ì— ëŒ€í•´ì„œ Vector Embedding & Qdrant Upsert
	```
	bash ./scripts/makeall.sh
	```

* MongoDBì— ìƒˆë¡œ insertë˜ëŠ” ë°ì´í„° íŠ¸ë˜í‚¹ & ì‹¤ì‹œê°„ ì¶”ì²œ ì„œë²„ ì‹¤í–‰
	```
	bash ./scripts/run.sh
	```

### ë™ì‘ì›ë¦¬

**A. ì‚¬ì „ Qdrant êµ¬ì¶•**

1. MongoDB ë‚´ 'MatchResult' ì½œë ‰ì…˜ ì‚­ì œ í›„ ì¬ìƒì„±
2. MongoDB 'MatchRequest'ì™€ 'User'ë¥¼ aggregation í•œ í›„, Qdrantì— upsert
3. 2ë²ˆ ê²°ê³¼ ë‹¤ ë½‘ìœ¼ë©´ MongoDB 'MatchResult'ì— Insert
4. MongoDB 'court'ì™€ 'timeslots'ë¥¼ agrregationí•œ í›„, Qdrantì— upsert

**B. ì¶”ì²œ ë°©ë²•**

1. ëª¨ë“  'MatchRequest'ìŒì— ëŒ€í•´ì„œ Description ì„ë² ë”©ì˜ ìœ ì‚¬ë„(cos sim)ë¥¼ ê¸°ë°˜ìœ¼ë¡œ ì¶”ì²œ
	- ì´ ë•Œ, ë‹¨ë³µì‹ì—¬ë¶€ê°€ ë‹¤ë¥´ë©´ í•„í„°ë§ë¨.
	- ê²½ê¸°ëª©ì ì€ 'ANY'ëŠ” ë‹¤ ê±¸ë¦¬ê³ , 'FUN', 'INTENSE'ëŠ” ê°™ì€ê±° + ìƒëŒ€ë°© ANYë§Œ ê±¸ë¦¼
	- ìœ„ì¹˜ëŠ” ì¶”ì²œë°›ëŠ” ì‚¬ëŒ ê¸°ì¤€ maxDistance ë°˜ì§€ë¦„ìœ¼ë¡œ ì›í˜• ê·¸ë ¤ì„œ ê·¸ ë²”ìœ„ ë°–ì€ í•„í„°ë§í•¨.
	- ì‹œê°„ì€ startTime~endTime êµì§‘í•©ë§Œ ìˆìœ¼ë©´ ë¨. êµ¬ì²´ì ì¸ ì‹œê°„ ì„¤ì •ì€ ì´í›„ ë‹¨ê³„ì—ì„œ ì§„í–‰.
2. ëª¨ë“  'MatchRequst'ìŒì— ëŒ€í•´ì„œ ì¤‘ê°„ ì¢Œí‘œ ê¸°ì¤€ìœ¼ë¡œ ê±°ë¦¬(ìœ í´ë¦¬ë“œ ë””ìŠ¤í„´ìŠ¤)ë¥¼ ê¸°ë°˜ìœ¼ë¡œ í…Œë‹ˆìŠ¤ì¥ ì¶”ì²œ
	- startTime, endTime, minTime, maxTime ì—°ì‚°ì€ ì—¬ê¸°ì„œ ì¼ì–´ë‚¨.
	- ì‹œê°„ í”½ìŠ¤í•˜ê³  timeslot ì¡°íšŒì—ì„œ ì—´ë ¤ìˆìœ¼ë©´('BEFORE') ì¡°íšŒ
3. ì´í›„ ë‚˜ì™€ ìƒëŒ€ì˜ ntrp ì°¨ì´ ìˆœìœ¼ë¡œ ì˜¤ë¦„ì°¨ìˆœ ì •ë ¬

**C. ìˆ˜ì •/ì‚­ì œ**
1. matchRequest, user, courtê°€ ì‚­ì œë  ê²½ìš° Qdrantì— ë°˜ì˜ë¨.
2. ë‹¤ë§Œ, ì¶”ì²œì‹œì—ëŠ” ì •ë³´ë¥¼ ë‹¤ í™œìš©í•˜ë¯€ë¡œ MongoDBëŠ” ì—…ë°ì´íŠ¸ ë”°ë¡œ í•´ì•¼í•¨. => matchRequest-user aggregationì„ ì“°ê¸° ë•Œë¬¸ì— ë‘˜ ì¤‘ í•˜ë‚˜ëŠ” ì§€ìš°ê³  í•˜ë‚˜ëŠ” ì‚´ë¦¬ë©´ ì“°ë ˆê¸° ë°ì´í„°ê°€ ë¨.
3. ê²Œì„ì´ ìƒì„±ë  ì‹œ Qdrant ì½”íŠ¸ì—ì„œ íƒ€ì„ìŠ¬ë¡¯ì´ ì—…ë°ì´íŠ¸ë°ê³  Qdrant matchRequest-user aggregationì´ ì‚­ì œë¨.
4. ì´ì™¸ì˜ ëª¨ë“  ì¼€ì´ìŠ¤ëŠ” Qdrantì—ì„œ ê´€ì—¬í•˜ì§€ ì•ŠìŒ.

## ë¬´ì¸ ì‹¬íŒ AI

### ê°œìš”

![referee_ai_example](./images/referee_ai_example.png)

## ToDo

- [ ] ë¬´ì¸ ì‹¬íŒ AI - í”„ë¡ íŠ¸ ì—°ë™
- [ ] ë¬´ì¸ ì‹¬íŒ AI - ë°°í¬ìš© ì½”ë“œ ì •ë¦¬
- [ ] Docker í™˜ê²½ ì„¸íŒ… 

## References

[tennis-tracking](https://github.com/ArtLabss/tennis-tracking)

[TennisProject](https://github.com/yastrebksv/TennisProject)

[Tennis](https://github.com/HaydenFaulkner/Tennis)
